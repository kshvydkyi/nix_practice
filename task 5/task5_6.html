<!doctype html>
 
<html>
<head>
    <title>Раскрывающейся списка</title>
    <meta charset="utf-8">
    <style type="text/css">
        ul.expandable li { list-style-image: url('./img/point.gif') }
        li ul.expandable { display: none } /* выставить в none */
    </style>
    <script type="text/javascript">
        /*
            Опишите функцию setPlusIcon(), которая 
            - устанавливает для элементов li значок [+], 
                если этот элемент имеет вложенный список
            - регистрирует функцию aClick в качестве обработчика события onclick
                для всех ссылок
        */
        /*
            Запустите функцию setPlusIcon() при загрузке страницы
        */
        function setPlusIcon(){
            let alllis = document.getElementsByTagName("li");
            for(let i = 0; i < alllis.length; i++){
                let li = alllis[i];
                let alluls = li.getElementsByTagName("ul");
                if(alluls.length > 0){
                    if(alluls[0].className == "expandable")
                        li.style.listStyleImage = "url('./img/plus.gif')";
                }
            }
            let allA = document.getElementsByTagName('a')
            for(let i = 0; i < allA.length; i++){
                allA[i].addEventListener('click', aClick);
            }
        }
        window.onload = setPlusIcon;
 
        function aClick(e){
            li = e.target.parentNode || e.srcElement.parentNode;
            liuls = li.children;
            if (liuls.length > 0){
                for(let i = 0; i < liuls.length; i++){
                    if(liuls[i].tagName == "UL"){
                        console.log(liuls[i].tagName);
						
                        if(liuls[i].style.display == "block"){
                            console.log(liuls[i].style.display = "none");
							li.style.listStyleImage = "url('./img/plus.gif')";
                        }
                        else if(liuls[i].style.display == "none" || liuls[i].style.display == ""){
                            console.log(liuls[i].style.display = "block");
							li.style.listStyleImage = "url('./img/minus.gif')";
                        }
                    }
                }
            }
        }   
        
    </script>
</head>
 
<body>
    <h1>Пример раскрывающегося списка</h1>
    <ul class="expandable">
        <li>
            <a href="#">Книги</a>
            <ul class="expandable">
                <li>
                    <a href="#">Отечественные</a>
                    <ul class="expandable">
                        <li><a href="#">Детективы</a></li>
                        <li><a href="#">Научная фантастика</a></li>
                        <li><a href="#">Исторические</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#">Зарубежные</a>
                    <ul class="expandable">
                        <li><a href="#">Детективы</a></li>
                        <li><a href="#">Научная фантастика</a></li>
                        <li><a href="#">Исторические</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <a href="#">DVD</a>
            <ul class="expandable">
                <li>
                    <a href="#">Отечественные</a>
                    <ul class="expandable">
                        <li><a href="#">Детективы</a></li>
                        <li><a href="#">Научная фантастика</a></li>
                        <li><a href="#">Исторические</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#">Зарубежные</a>
                    <ul class="expandable">
                        <li><a href="#">Детективы</a></li>
                        <li><a href="#">Научная фантастика</a></li>
                        <li><a href="#">Исторические</a></li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</body>
</html>